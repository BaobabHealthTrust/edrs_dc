<style type="text/css">
  .dispatch{
      width: 100%;
      border-collapse: collapse;
  }

  .dispatch th {
    border : 1px solid lightgray;
    background: #4c79a3;
    color:#ffffff;
    padding: 0.8em;
    width:50%;
  }

  .dispatch td {
    border : 1px solid lightgray;
    width:50%;
  }
     
</style>
<div id="default" style="width: 90%;margin:auto; height: 400px; text-align: center; vertical-align: top;">
    <div style="width:45%;float:left;margin-left:2%">
        <h2>Scan Barcode</h2>
        <table>
          <tr>
              <td>
                  <input type="text" name="barcode" id="barcode" style="font-size: 250%">
              </td>
              <td>
                <button onclick="clearBarcode()">Clear</button>
              </td>
          </tr>
        </table>
        
    </div>
    <div style="width:45%;float:right;margin-left:2%">
        <h2>List Forms to dispatch</h2>
        <table class="dispatch">
            <thead>
                  <tr>
                      <th style="width:50%">Barcode</th>
                      <th  style="width:50%">Death Entry Number</th>
                  </tr>
            </thead>
        </table>
        <div style="width:100%;height:500px;overflow-y:scroll;">
        <table class="dispatch" id="dispatches">

        </table>          
        </div>
    </div>

    <button class="green" style="position:absolute;right:3%;bottom:10%">Done</button>                       
</div>
<%= render :partial => "landing_resize" %>
<script type="text/javascript">
      var  barcodeInterval;
      barcodeInterval = setInterval(function(){
            checkBarcode();
      },300);

      function checkBarcode(){
        var barcode_element = __$("barcode")
        var value = barcode_element.value;

        if (value.length == 0) {
            return;
        }else{
            if (value.match(/\$/)) {
              
                addRow(value.substring(0,value.length - 1));
                barcode_element.value = ""
            }
        }
      }

      function addRow(value){
          var table = __$("dispatches");
          var tr = document.createElement("tr");
          var td = document.createElement("td");
          td.innerHTML = "XXXXXXXXXX";
          tr.appendChild(td);
          var td = document.createElement("td");
          td.innerHTML = value;
          tr.appendChild(td);
          table.appendChild(tr);
      }

      function clearBarcode(){
        __$("barcode").value = ""
      }
</script>

