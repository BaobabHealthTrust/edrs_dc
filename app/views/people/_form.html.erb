<script type="text/javascript" src="/javascripts/edrs.js"></script>
<script type="text/javascript">

 Object.defineProperty(Date.prototype, "format", {
                value: function (format) {
                    var date = this;

                    var result = "";

                    if (!format) {

                        format = ""

                    }

                    var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];

                    var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September",
                        "October", "November", "December"];

                    if (format.match(/YYYY\-mm\-dd/)) {

                        result = date.getFullYear() + "-" + padZeros((parseInt(date.getMonth()) + 1), 2) + "-" + padZeros(date.getDate(), 2);

                    } else if (format.match(/mmm\/d\/YYYY/)) {

                        result = months[parseInt(date.getMonth())] + "/" + date.getDate() + "/" + date.getFullYear();

                    } else if (format.match(/d\smmmm,\sYYYY/)) {

                        result = date.getDate() + " " + monthNames[parseInt(date.getMonth())] + ", " + date.getFullYear();

                    } else {

                        result = date.getDate() + "/" + months[parseInt(date.getMonth())] + "/" + date.getFullYear();

                    }

                    return result;
                }
    });
	function loadPersonSummary(){

		    if (__$("keyboard")) {

		        __$("keyboard").style.display = "none";

		    }

		    var tstControl = __$("tt_page_summary")

		    if (tstControl) {

		        tstControl .innerHTML = "";

		        var table = document.createElement("table");
		        table.style.width = "100%";
		        table.style.borderCollapse = "collapse";

		       tstControl .appendChild(table);

		        var tr = document.createElement("tr");

		        table.appendChild(tr);

		        var th = document.createElement("th");
		        th.style.fontSize = "1.2em";
		        th.style.textAlign = "left";
		        th.style.padding = "20px";
		        th.style.borderBottom = "1px solid #ccc";
		        th.innerHTML = "Particulars of the deceased";

		        tr.appendChild(th);

		        var tr = document.createElement("tr");

		        table.appendChild(tr);

		        var td = document.createElement("td");

		        tr.appendChild(td);

		        var div = document.createElement("div");
		        div.style.width = "100%";
		        div.style.height = "calc(100vh - 180px)";
		        div.style.overflow = "auto";

		        td.appendChild(div);

		        var tableContent = document.createElement("table");
		        tableContent.style.width = "98%";
		        tableContent.style.borderCollapse = "collapse";
		        tableContent.cellPadding = "2";
		        tableContent.style.border = "1px solid black"
		        tableContent.style.fontSize = "1em";
		        tableContent.style.margin = "auto";

		        div.appendChild(tableContent);


		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("th")
		        td.innerHTML = "Part 1 <br/> PERSONAL DETAILS OF DECEASED";
		        td.rowSpan ="11";
		        td.style.width ="10%";
		        td.style.border = "1px solid black";
		        tr.appendChild(td)
		        var td = document.createElement("td")
		        td.innerHTML = "1";
		        td.style.border = "1px solid black";
		        tr.appendChild(td);
		        var td = document.createElement("td")
		        td.innerHTML = "Surname";
		        td.style.border = "1px solid black";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan = "2";
		        td.innerHTML = __$('person_last_name') && __$('person_last_name').value ? __$("person_last_name").value : "";
		        tr.appendChild(td)
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "First name";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan = "2";
		        td.innerHTML =__$('person_first_name') && __$('person_first_name').value ? __$("person_first_name").value : "";
		        tr.appendChild(td)
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Other names";
		        td.colSpan = "2";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan = "2";
		        td.innerHTML = __$('person_middle_name') && __$('person_middle_name').value ? __$("person_middle_name").value : "";;
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "2";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "ID No.";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$('person_id_number') && __$('person_id_number').value ? __$("person_id_number").value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "3";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Nationality";
		        td.colSpan ="2";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$('person_nationality') && __$('person_nationality').value ? __$("person_nationality").value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "4";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Sex";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$('person_gender') && __$('person_gender').value ? __$("person_gender").value : "";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "5";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Date of Birth";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Year";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$('person_birth_year') && __$('person_birth_year').value ? __$("person_birth_year").value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Month";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$('person_birth_month') && __$('person_birth_month').value ? __$("person_birth_month").value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Day";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$('person_birth_day') && __$('person_birth_day').value ? __$("person_birth_day").value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "6";
		        td.rowSpan="2"
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Birth Certificate No.";
		        td.rowSpan="2"
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.rowSpan="2"
		        td.innerHTML = __$('person_birth_certificate_number') && __$('person_birth_certificate_number').value ? __$("person_birth_certificate_number").value : "";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "7";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Date of death";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan ="6";
		        td.innerHTML = __$("person_date_of_death") && __$("person_date_of_death").value ? (new Date(__$('person_date_of_death').value)).format() : "";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.rowSpan ="4";
		        td.innerHTML = "8";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Place of Death";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan ="9";
		        td.innerHTML =__$("person_place_of_death") && __$("person_place_of_death").value ? __$('person_place_of_death').value : "";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Health Facility";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan ="9";
		        td.innerHTML =__$("person_hospital_of_death") && __$("person_hospital_of_death").value ? __$('person_hospital_of_death').value : "";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Home";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "District";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML =__$("person_place_of_death").value=="Home" &&__$("person_place_of_death_district").value  ? __$('person_place_of_death_district').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "TA";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML =__$("person_place_of_death_ta") && __$("person_place_of_death_ta").value ? __$('person_place_of_death_ta').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Village";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		         td.colSpan ="4";
		        td.innerHTML =__$("person_place_of_death_village") && __$("person_place_of_death_village").value ? __$('person_place_of_death_village').value : "";
		        tr.appendChild(td);


		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Other";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan ="9";
		        td.innerHTML =__$("person_other_place_of_death") && __$("person_other_place_of_death").value ? __$('person_other_place_of_death').value : "";
		        tr.appendChild(td);

		         var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "9";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Physical address";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "District";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML =__$("person_current_district") && __$("person_current_district").value ? __$('person_current_district').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "TA";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML =__$("person_current_ta") && __$("person_current_ta").value ? __$('person_current_ta').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Village";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		         td.colSpan ="4";
		        td.innerHTML =__$("person_current_village") && __$("person_current_village").value ? __$('person_current_village').value : "";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "10";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Home address";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "District";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML =__$("person_home_district") && __$("person_home_district").value ? __$('person_home_district').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "TA";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML =__$("person_home_ta") && __$("person_home_ta").value ? __$('person_home_ta').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Village";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan ="4";
		        td.innerHTML =__$("person_home_village") && __$("person_home_village").value ? __$('person_home_village').value : "";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "11";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.colSpan ="9";
		        td.style.border = "1px solid black";
		        td.innerHTML = "In case this is a female death, did the death occur while pregnant, at the time of delivery or within 6 weeks after the end of pregnancy?";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML =__$("person_died_while_pregnant") && __$("person_died_while_pregnant").value ? __$('person_died_while_pregnant').value : "";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("th");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Part 2 <br/> DETAILS OF PARENTS";
		        td.rowSpan ="4"
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "1";
		         td.rowSpan ="2"
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Mother's name";
		        td.colSpan ="11";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Surname";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$("person_mother_last_name") && __$("person_mother_last_name").value ? __$('person_mother_last_name').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "First name ";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$("person_mother_first_name") && __$("person_mother_first_name").value ? __$('person_mother_first_name').value : "";
		        tr.appendChild(td);
		         var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Other names ";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$("person_mother_middle_name") && __$("person_mother_middle_name").value ? __$('person_mother_middle_name').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "2";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "ID No.";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$("person_mother_id_number") && __$("person_mother_id_number").value ? __$('person_mother_id_number').value : "";
		        tr.appendChild(td);

		         var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "3";
		        td.rowSpan ="2"
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Father's name";
		        td.colSpan ="11";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Surname";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$("person_father_last_name") && __$("person_father_last_name").value ? __$('person_father_last_name').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "First name ";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$("person_father_first_name") && __$("person_father_first_name").value ? __$('person_father_first_name').value : "";
		        tr.appendChild(td);
		         var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Other names";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$("person_father_middle_name") && __$("person_father_middle_name").value ? __$('person_father_middle_name').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "4";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "ID No.";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$("person_father_id_number") && __$("person_father_id_number").value ? __$('person_father_id_number').value : "";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("th");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Part 3 <br/> DETAILS OF INFORMANT";
		        td.rowSpan ="7"
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "1";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Surname";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$("person_informant_last_name") &&__$("person_informant_last_name").value ? __$('person_informant_last_name').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "First name ";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$("person_informant_first_name") && __$("person_informant_first_name").value ? __$('person_informant_first_name').value : "";
		        tr.appendChild(td);
		         var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Other names";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$("person_informant_middle_name") && __$("person_informant_middle_name").value ? __$('person_informant_middle_name').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "2";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "ID No.";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = __$("person_informant_id_number") && __$("person_informant_id_number").value ? __$('person_informant_id_number').value : "";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "3";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Relationship to the deceased";
		        td.colSpan ="8";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan ="2";
		        td.innerHTML = __$("person_informant_relationship_to_deceased") && __$("person_informant_relationship_to_deceased").value ? __$('person_informant_relationship_to_deceased').value : "";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "4";
		        td.rowSpan ="2";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Address";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "District";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML =__$("person_informant_current_district") && __$("person_informant_current_district").value ? __$('person_informant_current_district').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "TA";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML =__$("person_informant_current_ta") && __$("person_informant_current_ta").value ? __$('person_informant_current_ta').value : "";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Village";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan ="5";
		        td.innerHTML =__$("person_informant_current_village") && __$("person_informant_current_village").value ? __$('person_informant_current_village').value : "";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Postal address";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        var address = __$('person_informant_addressline1') && __$('person_informant_addressline1').value ? __$('person_informant_addressline1').value  : "";
		        address = __$('person_informant_city') && __$('person_informant_city').value ? address + __$('person_informant_city').value : address;
		        td.innerHTML = address;
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Telephone number";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "5";
		        td.rowSpan = "3"
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan= "10"
		        td.innerHTML = "I certify that the above information is correct and I am aware that I could face criminal prosecution if this information is incorrect in material respect.";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Informant Signed";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan= "10"
		        td.innerHTML = __$("person_informant_signed") && __$("person_informant_signed").value ? __$('person_informant_signed').value : "No";
		        tr.appendChild(td);

		        var tr = document.createElement("tr");
		        tableContent.appendChild(tr);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.innerHTML = "Date informant signed";
		        tr.appendChild(td);
		        var td = document.createElement("td");
		        td.style.border = "1px solid black";
		        td.colSpan= "10"
		        td.innerHTML =__$("person_informant_signature_date") && __$("person_informant_signature_date").value ? (new Date( __$('person_informant_signature_date').value)).format() : "";
		        tr.appendChild(td);

		    }

		}
	
		function setAjaxUrl(case_number){

				switch(case_number) {
						case -1:
							var place = __$('touchscreenInput' + tstCurrentPage).value;

					      	__$("person_place_of_death_district").setAttribute("ajaxURL","/districts?place="+encodeURIComponent(place)+"&search_string=");

					        break;
					    case 0:
					      	var district = __$('touchscreenInput' + tstCurrentPage).value;

					      	if(__$("person_hospital_of_death")){
								__$("person_hospital_of_death").setAttribute("ajaxURL","/facilities?district="+district+"&search_string=");
					      	}
					      	if(__$("person_place_of_death_ta")){
					      		__$("person_place_of_death_ta").setAttribute("ajaxURL","/tas?district="+district+"&search_string=");
					      	}

					        break;
					    case 1:

					    	var ta = __$('touchscreenInput' + tstCurrentPage).value;

					    	var district = __$('person_place_of_death_district').value

					    	__$("person_place_of_death_village").setAttribute("ajaxURL","/villages?district="+district+"&ta="+ta + "&search_string=")

					        break;
					    case 2:

					    	var district = __$('touchscreenInput' + tstCurrentPage).value;

					      	__$("person_home_ta").setAttribute("ajaxURL","/tas?district="+district + "&search_string=")

					    	break;

					    case 3:

					    	var ta = __$('touchscreenInput' + tstCurrentPage).value;

					    	var district = __$('person_home_district').value

					    	__$("person_home_village").setAttribute("ajaxURL","/villages?district="+district+"&ta="+ta + "&search_string=")

					        break;
					    case 4:

					    	var district = __$('touchscreenInput' + tstCurrentPage).value;

					      	__$("person_informant_current_ta").setAttribute("ajaxURL","/tas?district="+district + "&search_string=")

					    	break;

					    case 5:

					    	var ta = __$('touchscreenInput' + tstCurrentPage).value;

					    	var district = __$('person_informant_current_district').value

					    	__$("person_informant_current_village").setAttribute("ajaxURL","/villages?district="+district+"&ta="+ta + "&search_string=")

					        break;

					     case 6:

					    	var district = __$('touchscreenInput' + tstCurrentPage).value;

					      	__$("person_current_ta").setAttribute("ajaxURL","/tas?district="+district + "&search_string=")

					    	break;

					    case 7:

					    	var ta = __$('touchscreenInput' + tstCurrentPage).value;

					    	var district = __$('person_current_district').value

					    	__$("person_current_village").setAttribute("ajaxURL","/villages?district="+district+"&ta="+ta + "&search_string=")

					        break;
				} 

		}

		function monthDaysKeyPad() {

		    var keyboard = __$("keyboard");

		    __$("inputFrame" + tstCurrentPage).style.height = "50px";

		    keyboard.innerHTML = "";

		    var keyPadDiv = document.createElement("div");

		    keyPadDiv.style.width = "40%";

		    keyPadDiv.style.float = "left";

		    keyboard.appendChild(keyPadDiv);

		    var months = {
		        "January": 0,
		        "February": 1,
		        "March": 2,
		        "April": 3,
		        "May": 4,
		        "June": 5,
		        "Juy": 6,
		        "August": 7,
		        "September": 8,
		        "October": 9,
		        "November": 10,
		        "December": 11
		    }

		    var year = __$("person_birth_year").value;

		    var month = __$("person_birth_month").value;

		    var nextMonthNumber = parseInt(months[month]) + 2;

		    var date = new Date(year + "-" + padZeros(nextMonthNumber, 2) + "-" + "01");

		    date.setDate(date.getDate() - 1);

		    var lateDayOfSelectedMonth = date.getDate()

		    var table = document.createElement("table");

		    table.style.width = "100%";

		    keyPadDiv.appendChild(table);


		    var tr;

		    for (var i = 1; i <= 31; i++) {

		        if ((i - 1) % 7 == 0) {

		            tr = document.createElement("tr");

		            table.appendChild(tr);

		        }

		        var td = document.createElement("td");

		        tr.appendChild(td);

		        var button = document.createElement("button");



		        td.appendChild(button);


		        if (i <= 9) {

		            button.innerHTML = "<span>0" + i+"</span>";

		            button.setAttribute("onclick", '__$("touchscreenInput"+tstCurrentPage).value ="0"+' + i);

		        } else {

		            button.innerHTML = "<span>"+i+"</span>";

		            button.setAttribute("onclick", '__$("touchscreenInput"+tstCurrentPage).value =' + i);

		        }

		        if (i > parseInt(lateDayOfSelectedMonth)) {

		            button.className = "gray";

		            button.removeAttribute("onclick");
		        }
		        else {

		        }

		    }

		    var unknownButton = document.createElement("button");

		    unknownButton.innerHTML = "Unknown";

		    unknownButton.style.float = "right";

		    unknownButton.style.marginTop = "10%";

		    unknownButton.setAttribute("onclick", '__$("touchscreenInput"+tstCurrentPage).value ="Unknown"');

		    //keyboard.appendChild(unknownButton);

		}

		function setAgeValues() {

		    var birthyear = __$("person_birth_year").value;

		    var birthmonth = __$('person_birth_month').value;

		    var birthday = __$("person_birth_day").value;

		    if (birthday.trim().toLowerCase() == "unknown") {

		        birthday = "05";

		        __$("person_birthdate_estimated").value = 1;

		    } else {

		        __$("person_birthdate_estimated").value = 0;

		    }

		    var months = {
		        "January": 0,
		        "February": 1,
		        "March": 2,
		        "April": 3,
		        "May": 4,
		        "June": 5,
		        "Juy": 6,
		        "August": 7,
		        "September": 8,
		        "October": 9,
		        "November": 10,
		        "December": 11
		    }

		    var birthdate = birthyear + "-" + padZeros(parseInt(months[birthmonth]) + 1, 2) + "-" + padZeros(parseInt(birthday), 2);

		    __$("person_birthdate").value = birthdate;

		    __$("person_date_of_death").setAttribute("minDate", birthdate);

		    __$("person_date_of_death").setAttribute("maxDate", (new Date().format("YYYY-mm-dd")));
		}

		function setEstimatedAgeValue() {

		    __$("person_birth_year").setAttribute("disabled", true);

		    __$("person_birth_month").setAttribute("disabled", true);

		    __$("person_birth_day").setAttribute("disabled", true);

		    if (__$("person_birthdate") && __$("person_age_estimate") && __$("person_birthdate_estimated")) {

		        if (__$("person_age_estimate").value.trim().length > 0) {

		            __$("person_birthdate_estimated").value = 1;

		            var year = (new Date()).getFullYear() - parseInt(__$("person_age_estimate").value.trim());

		            __$("person_birthdate").value = year + "-07-15";

		            console.log( __$("person_birthdate").value);

		        } else {

		            __$("person_estimate").value = 0;

		        }

		    }

		}

		function checkForDuplicate(){

				var data = {
								first_name    : __$("person_first_name").value,
								last_name 	  : __$("person_last_name").value,
								gender 		  : __$("person_gender").value,
								birthdate 	  : __$("person_birthdate").value,
								date_of_death : __$("person_date_of_death").value,
								place_of_death: __$("person_place_of_death").value,
								informant_last_name: __$("person_informant_last_name").value,
								informant_first_name: __$("person_informant_first_name").value
				}
				console.log(data)
				postAjax("/search_similar_record", data, function(response){

					var people = JSON.parse(response).response;
					if(people){

						showConfirmMessage("","Potential duplicate to "+people.length +" other record(s)","","#e2a648");

						var ids = [];

						for(var i = 0 ; i < people.length ; i++){

							ids[i] = people[i]['_id'];

						}
						__$("potential_duplicate").setAttribute("condition",true);
						__$("potential_duplicate").value = ids.toString();

					}

				})


		}

		function removeUnknown(){

			__$("Unknown").style.display ="none";
		}

		var patnum = ""
		var setFocusTimeout = 5000;
		var checkForBarcodeTimeout = 1500;
		var barcodeFocusTimeoutId = null;
		var barcodeFocusOnce = false;
		var barcodeId = '';
		var focusOnce = false;
		var barcode_element;

		function loadBarcodePage() {

		  focusForBarcodeInput()

		  checkForBarcode()

		}

		function focusForBarcodeInput(){

			if (!barcodeId) {
				barcodeId = "person_barcode";
			}

		  	barcode_element = document.getElementById(barcodeId);

			if (barcode_element) {
				barcode_element.focus();
				if (!focusOnce) barcodeFocusTimeoutId = window.setTimeout("focusForBarcodeInput()", setFocusTimeout);
			}
		}

		function checkForBarcode(validAction){

			if (__$("person_barcode")){

				var input_element = __$('touchscreenInput' + tstCurrentPage);

				if (input_element && input_element.value.match(/.+\$$/i) != null){

					 barcode_element.value = input_element.value.substring(0,input_element.value.length-1);

					 setTimeout(function(){

					 		 gotoNextPage();
					 },500);

					
						
				}else{
					window.setTimeout("checkForBarcode()", checkForBarcodeTimeout)
				}
			}
		}

		function getAge(dateString){

		    var today = new Date();

		    var birthDate = new Date(dateString);

		    var age = today.getFullYear() - birthDate.getFullYear();

		    var m = today.getMonth() - birthDate.getMonth();

		    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) 
		    {
		        age--;
		    }
		    return age;
		}

		function validatePregnancy(){

			var valid = true;

			if(__$("person_gender") && __$("person_gender").value == "Male"){

				valid = false;
			}
			if (__$('person_birthdate') && parseInt(getAge(__$('person_birthdate').value)) < 13 ){
				valid =  false;
			}
			return valid;

		}

		function validateDeathDate(){

			var date  = __$('touchscreenInput' + tstCurrentPage).value;

			console.log(date);

			console.log(__$("person_birthdate").value);

			if(date < __$("person_birthdate").value){

				showPopupMessage("Birth date ("+(new Date(__$("person_birthdate").value)).format()+") is greater than <br/> Date of death("+(new Date(__$("person_birthdate").value)).format() +")" ,"Date validation")

				setTimeout(function(){

					gotoPage(tstCurrentPage -1);

				},100)
			}
		}

		function removeDollar(){

			var input_element = __$('touchscreenInput' + tstCurrentPage);

			if (input_element && input_element.value.match(/.+\$$/i) != null){

				 setTimeout(function(){

				 		barcode_element.value = input_element.value.substring(0,input_element.value.length-1);

				 },1000);		
			}
			else{

				console.log("No dollar");
			}
		}
		window.addEventListener("load", loadBarcodePage, false)
</script>
<%= form_for @person, :url => '/people/create', :method => :post do |f| %>
	<% if site_type == "dc" %>
		<section name="Barcode">
			<sub id="person_barcode_section" name="Barcode">
				<%= text_field_tag "person[barcode]",nil , {:helpText=> "Scan Form Barcode",:tt_onUnLoad=>"removeDollar()"} %>
			</sub>
		</section>
	<%end%>
    <section name="Personal details of deceased">
            <sub id="person_details" name="Details of deceased">
                <%= (f.text_field :last_name, :helpText => "Surname",
                                  :allowFreeText =>true, :ajaxURL => "/get_last_names?search=") rescue "" %>

                <%= (f.text_field :first_name,:helpText => "First Name",:allowFreeText =>true,  :ajaxURL => "/get_first_names?search=") rescue "" %>

                <%= (f.text_field :middle_name, :helpText => "Middle Name",:allowFreeText =>true, :optional => :true, :ajaxURL => "/get_first_names?search=") rescue "" %>

                <%= text_field_tag "person[id_number]",nil , {:helpText => "ID Number", :optional => true} %>

                 <%= select_tag("person[gender]",options_for_select([" ", "Female", "Male"], @person[:gender]),:helpText =>"Gender",:tt_requireNextClick => false) %>

                <%= text_field_tag "person[nationality]",nil , {:helpText => "Nationality",:ajaxURL => "/nationalities?search_string="} %>

                <%= text_field_tag "person[birth_year]", nil, {:helpText => 'Year of Birth', :field_type => 'number', :absoluteMin => "1890", :min => "1940", :absoluteMax => Date.today.year, :tt_pageStyleClass => "Numeric NumbersOnly"}  %>

                <%= select_tag "person[birth_month]", options_for_select(["January","February","March","April","May","June","July","August","September","October","November","December"], " "), {:helpText => 'Month of Birth', :condition => '$("person_birth_year").value.toLowerCase() != "unknown"',:validationJS => "validateDOB();",:validationMessage => 'Please enter a valid date', :tt_onLoad =>"__$('keyboard').style.display = 'none'",:tt_requireNextClick => false,:tt_pageStyleClass =>"NoKeyboard longSelectList" }%>

                <%= text_field_tag "person[age_estimate]", nil, {:helpText => 'Age Estimate', :absoluteMin => 1, :absoluteMax => 120, :field_type => 'number', :condition => '$("person_birth_year").value == "Unknown"', :tt_onLoad => "$('nextButton').style.display = 'block';", :tt_pageStyleClass => "Numeric NumbersOnly",:tt_onUnLoad => "setEstimatedAgeValue()"} %>

                <%= text_field_tag "person[birth_day]",  nil, :field_type => 'number', :helpText => 'Birth Day', :condition => '($("person_birth_year").value != "Unknown") && ($("person_birth_month").value != "Unknown")', :tt_onLoad =>  "monthDaysKeyPad();$('nextButton').style.display = 'block'" ,:tt_onUnLoad => "setAgeValues()"%>

                <%= (f.hidden_field :birthdate) rescue "" %>

                <%= f.hidden_field :birthdate_estimated rescue "" %>

                <%= text_field_tag "person[birth_certificate_number]",nil , {:helpText => "Birth Certificate ID Number", :optional => true} %>
            </sub>

            <sub id="death_details" name="Details of death">
                <%= (f.text_field :date_of_death,:helpText => "Date of Death",:field_type => "date" ,:tt_onLoad =>"removeUnknown()",:tt_onUnLoad => "validateDeathDate()") rescue "" %>

                <% if site_type == "facility" %>
                    <%= (f.hidden_field :place_of_death, :value => "Hospital/Institution")  %>
                    <%= (f.hidden_field :place_of_death_district, :value => @district.name) %>
                    <%= (f.hidden_field :hospital_of_death, :value => @facility.name) %>
                <% elsif site_type =="dc" %>
                    <%= select_tag("person[place_of_death]", options_for_select(["","Hospital/Institution", "Home","Other"], @person[:place_of_death]),:id=> "person_place_of_death",:helpText =>"Place of Death", :tt_onLoad =>"showCategory('Section 1 : Personal Details of deceased')", :tt_onUnLoad =>"setAjaxUrl(-1)",:tt_requireNextClick => false,:tt_pageStyleClass =>"NoKeyboard") %>

                    <%= text_field_tag "person[place_of_death_district]", nil, {:helpText => "Place of Death District" ,  :tt_onUnLoad => "setAjaxUrl(0)"} %>

                    <%= text_field_tag "person[hospital_of_death]", nil, {:helpText => "Hospital/Instution of death",:condition => "__$('person_place_of_death').value.trim()=='Hospital/Institution'"} %>

                    <%= text_field_tag "person[place_of_death_ta]", nil, {:helpText => "Traditional authority of death",:condition => "__$('person_place_of_death').value.match('Home')", :tt_onUnLoad => "setAjaxUrl(1)",:tt_onLoad =>"showCategory('Section 1 : Personal Details of deceased')"} %>

               		<%= text_field_tag "person[place_of_death_village]", nil, {:helpText => "Village of death",:condition => "__$('person_place_of_death').value.match('Home')"} %>

                	<%= (f.text_field :other_place_of_death,:helpText => "Other place of death specify",:condition => "__$('person_place_of_death').value.match('Other')") rescue "" %>
                <% end %>


             
            </sub>

            <sub id="home_address" name="Home address">

            	 <%= text_field_tag "person[home_country]", nil, {:helpText => "Home nationality",:ajaxURL => "/nationalities?search_string="} %>

   				<%= text_field_tag "person[home_district]", nil, {:helpText => "Home district",
                                :condition => "__$('person_home_country').value.toLowerCase().match('malawi')",
                                :ajaxURL =>"/districts?search_string=",:tt_onUnLoad => "setAjaxUrl(2)"} %>

                  <%= text_field_tag "person[home_ta]", nil, {:helpText => "Home Traditional Authority",
                                :condition => "__$('person_home_country').value.toLowerCase().match('malawi')",
                                :tt_onUnLoad => "setAjaxUrl(3)"} %>

               	<%= text_field_tag "person[home_village]", nil, {:helpText => "Home Village",
                                :condition => "__$('person_home_country').value.toLowerCase().match('malawi')"} %>
            </sub>

            <sub id="physical_address" name="Physical address">

            	 <%= text_field_tag "person[current_country]", nil, {:helpText => "Nationality of Residence",:ajaxURL => "/nationalities?search_string="} %>

   				<%= text_field_tag "person[current_district]", nil, {:helpText => "District of Residence",
                                :condition => "__$('person_nationality').value.toLowerCase().match('malawi')",
                                :ajaxURL =>"/districts?search_string=",:tt_onUnLoad => "setAjaxUrl(6)"} %>

                  <%= text_field_tag "person[current_ta]", nil, {:helpText => "Traditional Authority of Residence",
                                :condition => "__$('person_nationality').value.toLowerCase().match('malawi')",
                                :tt_onUnLoad => "setAjaxUrl(7)"} %>

               	<%= text_field_tag "person[current_village]", nil, {:helpText => "Village of Residence",
                                :condition => "__$('person_nationality').value.toLowerCase().match('malawi')"} %>
            </sub>

            <sub id='pregnancy_status' name="Pregnancy status">
               <%= select_tag("person[died_while_pregnant]", options_for_select(['No', 'Yes'], @person[:died_while_pregnant]),
                        :helpText =>"Did the death occur while pregnant?<br/>(<i style='font-size: 12px'> at the time of delivery or within 6 weeks after the end of pregnancy</i>)", :condition =>"validatePregnancy()") %>
            </sub>
  	</section>

    <section name="Details of parents">
            <sub id="details_mother" name="Details of mother">
                <%= (f.text_field :mother_last_name, :helpText => "Mother Last Name",:optional => :true,:allowFreeText =>true, :ajaxURL => "/get_last_names?search=") rescue "" %>

                <%= (f.text_field :mother_first_name,:helpText => "Mother First Name",:allowFreeText =>true,:optional => :true,:ajaxURL => "/get_first_names?search=") rescue "" %>

                <%= (f.text_field :mother_middle_name, :helpText => "Mother Middle Name",:allowFreeText =>true, :optional => :true, :ajaxURL => "/get_first_names?search=") rescue "" %>

                <%= (f.text_field :mother_id_number, :helpText => "Mother ID Number",:optional => :true,:allowFreeText =>true) rescue "" %>
            </sub>
            <sub id="details_father" name="Details of father">
                <%= (f.text_field :father_last_name,:helpText => "Father Last Name",:allowFreeText =>true,:optional => :true, :ajaxURL => "/get_last_names?search=") rescue "" %>

                <%= (f.text_field :father_first_name,:helpText => "Father First Name",:allowFreeText =>true,:optional => :true,:ajaxURL => "/get_first_names?search=") rescue "" %>

                <%= (f.text_field :father_middle_name, :helpText => "Father Middle Name",:allowFreeText =>true, :optional => :true, :ajaxURL => "/get_first_names?search=") rescue "" %>

                 <%= (f.text_field :father_id_number, :helpText => "Father ID Number",:optional => :true,:allowFreeText =>true) rescue "" %>
            </sub>
    </section>

    <section name="Informant's details">
            <sub id="info_details" name="Basic demographics">
                <%= (f.text_field :informant_last_name, :helpText => "Informant Last Name",:allowFreeText =>true,:ajaxURL => "/get_last_names?search=") rescue "" %>

                <%= (f.text_field :informant_first_name,:helpText => "Informant First Name",:allowFreeText =>true,:ajaxURL => "/get_first_names?search=") rescue "" %>

                <%= (f.text_field :informant_middle_name, :helpText => "Informant Middle Name",:allowFreeText =>true,:ajaxURL => "/get_first_names?search=",:optional => :true) rescue "" %>

                <%= (f.text_field :informant_id_number, :helpText => "Informant ID Number",:optional => :true,:allowFreeText =>true) rescue "" %>

                <%= select_tag("person[informant_relationship_to_deceased]", options_for_select(['', 'Husband', 'Wife',
                             'Father', 'Mother',
                             'Grandfather', 'Grandmother',
                             'Brother', 'Sister',
                             'Son', 'Daughter',
                             'Nephew', 'Niece',
                             'Uncle', 'Aunt',
                             'Other'], @person[:informant_relationship_to_deceased]),:helpText =>"Relationship to deceased",:tt_pageStyleClass =>"NoKeyboard longSelectList") %>

                <%= (f.text_field :informant_relationship_to_deceased_other,:condition=> "__$('person_informant_relationship_to_deceased').value.match('Other')",:helpText => "Relationship to Deceased specify") rescue "" %>
            </sub>
            <sub id="info_home_address" name="Address">

   				<%= text_field_tag "person[informant_current_district]", nil, {:helpText => "Informant current district",:ajaxURL =>"/districts",:tt_onUnLoad => "setAjaxUrl(4)"} %>

                  <%= text_field_tag "person[informant_current_ta]", nil, {:helpText => "Informant current TA",:tt_onUnLoad => "setAjaxUrl(5)"} %>
    			
    			<%= text_field_tag "person[informant_current_village]", nil, {:helpText => "Informant current village"} %>

                <%= (f.text_field :informant_addressline1,:helpText => "Informant address",:placeholder => "P.O. box 200",:optional => :true) rescue "" %>

                <%= (f.text_field :informant_addressline2,condition=>false,:helpText => "Informant Address Line 2",:placeholder => "Street / Company /Building",:optional => :true) rescue "" %>

                <%= (f.text_field :informant_city,:helpText => "Informant city",:placeholder => "Location e.g Area 3",:optional => :true) rescue "" %>

                <%= (f.text_field :informant_phone_number,:helpText => "Informant phone number", :field_type =>"number",
                                  :tt_pageStyleClass => "Numeric NumbersOnly",:valietionRule => "^01\\d{6}$|Unknown|Not Available|^01\\d{8}$|^02\\d{8}$|^03\\d{8}$|^04\\d{8}$|^05\\d{8}$|^06\\d{8}$|^07\\d{8}$|^08\\d{8}$|^09\\d{8}$|^N\\/A$",:validationMessage => "Not a valid phone number",:optional => :true) rescue "" %>
            </sub>
            <sub id="Informant verification" name="Verification">
                <%= select_tag("person[informant_signed]", options_for_select(['Yes','No'], @person[:informant_signed]),:helpText =>"Informant Signed") %>

                <%= (f.text_field :informant_signature_date,:helpText => "Date Informant Signed",:condition => "__$('person_informant_signed').value.trim().toLowerCase() == 'yes'",
                                      :field_type => "date",:tt_onLoad =>"removeUnknown()") rescue "" %>
            </sub>
    </section>

    <% if site_type == "dc" %>

    <section name="Verification">
            <sub id="village_headman_verification" name="Village head verification">
                <%= select_tag("person[headman_verified]", options_for_select(['Yes','No'], @person[:headman_verified]),:helpText =>"Village leader Signed") %>

                <%= (f.text_field :headman_verification_date,:helpText => "Date Headman verified",
                                  :field_type => "date",:condition => "__$('person_headman_verified').value.trim().toLowerCase() =='yes'",
                                  :tt_onLoad =>"removeUnknown()") rescue "" %>
            </sub>
            <sub id="church_verification" name="Church verification">
                <%= select_tag("person[church_verified]", options_for_select(['Yes','No'], @person[:church_verified]),:helpText =>"Church leader Signed") %>

                <%= (f.text_field :church_verification_date,:helpText => "Date Church leader verified",
		                          :field_type => "date",:condition => "__$('person_church_verified').value.trim().toLowerCase() =='yes'",:tt_onLoad =>"removeUnknown()") rescue "" %>
            </sub>
    </section>
    <% end %>

    <% if false %>

    <section name="Acknowledgement of Receipt">
        	<sub id="acknowledgement_of_receipt" name="Acknowledgement of Receipt">
        		<%= (f.text_field :acknowledgement_of_receipt_date,:helpText => "Acknowledgement of receipt date",
                                  :field_type => "date",:tt_onLoad =>"removeUnknown()") rescue "" %>
        	</sub>
    </section>


    <% end %>
    <input type="hidden" name="potential_duplicate" id="potential_duplicate" condition="false">

    <section name="Summary">
        <sub id="summary" name="Summary">
		     <%= text_field_tag "summary", nil, {:helpText => 'Summary', :tt_onLoad=>"checkForDuplicate();loadPersonSummary()"} %>
        </sub>
    </section>  

<% end %>